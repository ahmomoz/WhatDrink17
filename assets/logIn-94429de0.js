import"./bootstrap.min-feac71ab.js";const u="https://authbridge.onrender.com/user",l="https://drinkpicker-nclv.onrender.com/login",m="index.html",s=new URLSearchParams(window.location.search).get("token");async function d(e){try{const t=await i(u,"GET",e);t&&t.data.email&&r(t.data.email,e)}catch(t){console.error("身份驗證過程中發生錯誤:",t)}}async function r(e,t){try{const n=await i(l,"POST",null,{email:e,password:t});n.status===200&&n.data.accessToken?(g(n.data),f()):o()}catch{o()}}function g(e){sessionStorage.setItem("jwtToken",e.accessToken),sessionStorage.setItem("user_email",e.user.email),sessionStorage.setItem("user_id",e.user.id),sessionStorage.setItem("user_nickname",e.user.nickname),sessionStorage.setItem("user_picture",e.user.picture)}function o(){Swal.fire("登入失敗，請檢查帳號或密碼")}function f(){window.location.href=m}async function i(e,t,n="",a={}){const c={method:t,url:e,headers:{Authorization:n},data:a};return await axios(c)}function h(){return!!sessionStorage.getItem("jwtToken")}document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("logInEmail").value,n=document.getElementById("logInPassword").value;r(t,n)});s&&d(s);h();
